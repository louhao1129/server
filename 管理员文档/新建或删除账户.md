# 新建

```{bash}
# 新建一个名为test的用户
sudo adduser test
```

**操作步骤：**

1.  输入后，系统会提示你设置密码 **（输入时屏幕不显示，输完回车即可）**。

2.  再次输入密码确认。

3.  之后会问你 Full Name, Room Number 等信息，**一路按回车跳过**即可。

4.  最后输入 **`Y`** 确认。

**此外**

新用户可能出现jupyterHub无法登录的情况，管理员需要重启jupyterHub，使其重新读取系统用户列表

```{bash}
sudo systemctl restart jupyterhub
```

其他常用操作

```{bash}
# 查看已经存在的用户
awk -F: '$3 >= 1000 {print $1}' /etc/passwd

# 查看具有sudo权限的用户
grep sudo /etc/group
```

# 删除

删除账户只需要一条命令，但有一个非常**关键的细节**需要注意：你是只想删除账号，还是想把他留在服务器上的文件（家目录）也一起删掉？

### 场景一：彻底删除（账号 + 文件统统删掉），推荐

如果你想把这个用户干得干干净净，连同他在 `/home/xxx` 下的所有文件、配置、数据全部清空：

``` bash
# 格式：sudo userdel -r [用户名]
sudo userdel -r test
```

-   **`-r` (remove):** 这个参数至关重要！它表示同时删除用户的 **Home 目录** (`/home/test`) 和 **邮件池**。如果不加这个参数，账号虽然没了，但他的垃圾文件还会留在硬盘里占用空间。

------------------------------------------------------------------------

### 场景二：仅删除账号（保留文件）

如果你只是想暂时禁用这个账号，或者你想保留他的数据给别人看，但不想让他登录了：

``` bash
# 不加 -r
sudo userdel test
```

-   **后果：** 账号被删了，无法登录。但是 `/home/test` 文件夹还在，里面的数据也都还在。
-   **注意：** 此时这些文件会变成“无主文件”（属于一个不存在的 UID），你需要用 `chown` 把它们过户给别的用户，否则很难操作。

------------------------------------------------------------------------

### ⚠️ 常见报错：用户正在登录中

如果你删除时报错： `userdel: user test is currently used by process 1234`

说明**这个用户当前正在登录**，或者他跑了后台程序（nohup/tmux）。

**暴力解决法：** 1. **先踢下线并杀光所有进程：** `bash     sudo killall -u test` 2. **然后再删除：** `bash     sudo userdel -r test`