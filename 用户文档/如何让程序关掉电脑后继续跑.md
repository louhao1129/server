ç›®çš„ï¼šåˆ›å»ºæŒä¹…åŒ–çš„ç»ˆç«¯ä¼šè¯ï¼ˆä¸ä¼šç”±äº ssh æ–­å¼€å¯¼è‡´è¿è¡Œåœæ­¢ï¼‰ï¼Œæ–­å¼€åå¯é‡æ–°è¿æ¥

**åœºæ™¯ï¼š**Â ä½ æƒ³è·‘ä¸€ä¸ªéœ€è¦ 5 å°æ—¶çš„ Python è„šæœ¬ï¼Œä½†ä½ éœ€è¦å…³æ‰ç”µè„‘æˆ–è€…æ–­å¼€ SSHï¼Œä¸æƒ³è®©è„šæœ¬å› æ­¤ä¸­æ–­ã€‚

éœ€è¦åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œä¸èƒ½ä½¿ç”¨Rstudioæ§åˆ¶å°æˆ–è€…jupyternotebook

# nohup

`nohup`ï¼ˆNo Hang Upï¼‰æ˜¯ Linux ä¸­æœ€è€ç‰Œã€æœ€ç®€å•çš„åå°ä¿æ´»å·¥å…·ã€‚

#### 1. å¯åŠ¨ä»»åŠ¡ï¼ˆæœ€æ ¸å¿ƒçš„å‘½ä»¤ï¼‰

æ ‡å‡†å…¬å¼ï¼š`nohup [ä½ çš„å‘½ä»¤] &`

-   **nohup**: å‘Šè¯‰ç³»ç»Ÿï¼Œå°±ç®—æˆ‘é€€å‡ºäº† SSHï¼Œä¹Ÿä¸è¦æŒ‚æ–­è¿™ä¸ªç¨‹åºã€‚
-   **&**: å‘Šè¯‰ç³»ç»Ÿï¼ŒæŠŠè¿™ä¸ªç¨‹åºæ”¾åˆ°**åå°**å»è·‘ï¼Œä¸è¦å ç”¨æˆ‘å½“å‰çš„ç»ˆç«¯ã€‚

**ä¸¾ä¾‹ï¼š**

``` bash
# å‡å¦‚ä½ è¦è¿è¡Œ train.py
nohup python train.py &
```

*è¾“å…¥å®Œå›è½¦ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ª PIDï¼ˆè¿›ç¨‹å·ï¼‰ï¼Œæ¯”å¦‚ `[1] 12345`ï¼ŒåŒæ—¶æç¤º `ignoring input and appending output to 'nohup.out'`ã€‚*

#### 2. æŸ¥çœ‹æ—¥å¿—

æ—¢ç„¶ç¨‹åºå»åå°äº†ï¼Œå±å¹•ä¸Šå°±ä¸æ˜¾ç¤ºæ‰“å°ä¿¡æ¯äº†ã€‚æ‰€æœ‰çš„ `print` è¾“å‡ºéƒ½ä¼šè¢«è‡ªåŠ¨ä¿å­˜åœ¨å½“å‰ç›®å½•ä¸‹çš„ **`nohup.out`** æ–‡ä»¶é‡Œã€‚

**å®æ—¶æŸ¥çœ‹æ—¥å¿—ï¼ˆæ¨èï¼‰ï¼š**

``` bash
tail -f nohup.out
```

-   è¿™ä¼šåƒæµæ°´ä¸€æ ·æ˜¾ç¤ºæœ€æ–°çš„æ—¥å¿—ã€‚
-   æƒ³é€€å‡ºæŸ¥çœ‹ï¼ŸæŒ‰ `Ctrl + C`ï¼ˆè¿™åªä¼šé€€å‡ºæŸ¥çœ‹æ—¥å¿—çš„æ¨¡å¼ï¼Œä¸ä¼šåœæ­¢åå°çš„ç¨‹åºï¼‰ã€‚

#### 3. å¦‚ä½•åœæ­¢ä»»åŠ¡ï¼Ÿ

å› ä¸ºç¨‹åºåœ¨åå°ï¼Œä½ æ²¡æ³•æŒ‰ `Ctrl + C` åœæ­¢å®ƒã€‚ä½ éœ€è¦â€œæ€â€æ‰å®ƒã€‚

1.  **æ‰¾åˆ°è¿›ç¨‹å· (PID)ï¼š** `ps -ef | grep train.py` *ä½ ä¼šåœ¨åˆ—è¡¨ä¸­çœ‹åˆ°ç±»ä¼¼ `root 12345 ... python train.py` çš„è¡Œï¼Œé‚£ä¸ª `12345` å°±æ˜¯ PIDã€‚*

2.  **ç»ˆæ­¢è¿›ç¨‹ï¼š** `kill 12345`

3.  å¦‚æœkillä¸æˆåŠŸï¼Œå¯ä»¥ä½¿ç”¨`kill -9 12345` ï¼Œå¼ºåˆ¶åˆ é™¤

------------------------------------------------------------------------

### ğŸ’¡ è¿›é˜¶å°æŠ€å·§ï¼ˆæŒ‡å®šæ—¥å¿—æ–‡ä»¶åï¼‰

å¦‚æœä½ ä¸æƒ³è®©æ‰€æœ‰æ—¥å¿—éƒ½æŒ¤åœ¨ `nohup.out` é‡Œï¼Œå¯ä»¥æŒ‡å®šæ–‡ä»¶åï¼š

``` bash
# æŠŠæ—¥å¿—è¾“å‡ºåˆ° my_log.txt
nohup python train.py > my_log.txt &
```

### nohup vs Tmux/Zellij

-   **nohup:** é€‚åˆ**ä¸éœ€è¦äº¤äº’**çš„ä»»åŠ¡ï¼ˆæ¯”å¦‚åªæ˜¯é—·å¤´è·‘ä»£ç ï¼‰ã€‚ç®€å•ï¼Œç³»ç»Ÿè‡ªå¸¦ã€‚
-   **Tmux/Zellij:** é€‚åˆ**éœ€è¦äº¤äº’**çš„ä»»åŠ¡ï¼ˆæ¯”å¦‚ç¨‹åºè¿è¡Œä¸­é€”éœ€è¦ä½ è¾“å…¥å¯†ç ï¼Œæˆ–è€…ä½ æƒ³çœ‹è¿›åº¦æ¡ï¼‰ã€‚åŠŸèƒ½æ›´å¼ºå¤§ã€‚

# Tmux

```{bash}
# æ–°å»ºtumuxä¼šè¯ 
tmux new -s my_session 

# æ¿€æ´»ç¯å¢ƒå¹¶è¿è¡Œè„šæœ¬ 
conda activate ä½ çš„ç¯å¢ƒå 

python ä½ çš„è„šæœ¬.py  
Rscript ä½ çš„è„šæœ¬.R 

è„±ç¦» tumux ä¼šè¯ï¼šæŒ‰ä¸‹ ctrl+bï¼Œç„¶åæŒ‰ d

# æŸ¥çœ‹æœ‰å“ªäº›ä¼šè¯åœ¨è¿è¡Œ 
tmux ls

# é‡æ–°è¿æ¥ä¼šè¯
tmux attach -t my_session

# æ€æ­»ä¼šè¯
tmux kill-session -t my_session
```

**å¦‚ä½•ç§»åŠ¨å…‰æ ‡æŸ¥çœ‹å†å²è®°å½•ï¼šæŒ‰ä¸‹ ctrl+Bï¼Œæ¾å¼€ï¼Œç„¶åæŒ‰ \[ï¼Œå³å¯è¿›å…¥å¤åˆ¶æ¨¡å¼ï¼Œ**

**æŒ‰ q é€€å‡º**

# Zellij

```{bash}
# æ–°å»ºä¼šè¯ 
zellij attach -c my_session 

# æ¿€æ´»ç¯å¢ƒå¹¶è¿è¡Œè„šæœ¬ 
conda activate ä½ çš„ç¯å¢ƒå 

python ä½ çš„è„šæœ¬.py  
Rscript ä½ çš„è„šæœ¬.R 

è„±ç¦» zellij ä¼šè¯ï¼šæŒ‰ä¸‹ ctrl+oï¼Œç„¶åæŒ‰ d

# æŸ¥çœ‹æœ‰å“ªäº›ä¼šè¯åœ¨è¿è¡Œ 
zellij ls

# é‡æ–°è¿æ¥ä¼šè¯
zellij attach my_session

# æ€æ­»ä¼šè¯
zellij delete-session my_session
```

è„±ç¦» zellij ä¼šè¯ï¼šæŒ‰ä¸‹ ctrl+oï¼Œç„¶åæŒ‰ d

```{bash}
# æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£
zellij -h

action                 Send actions to a specific session [aliases: ac]
attach                 Attach to a session [aliases: a]
convert-config
convert-layout
convert-theme
delete-all-sessions    Delete all sessions [aliases: da]
delete-session         Delete a specific session [aliases: d]
edit                   Edit file with default <!--MATH_PH_1-->VISUAL [aliases: e]
help                   Print this message or the help of the given subcommand(s)
kill-all-sessions      Kill all sessions [aliases: ka]
kill-session           Kill a specific session [aliases: k]
list-aliases           List existing plugin aliases [aliases: la]
list-sessions          List active sessions [aliases: ls]
options                Change the behaviour of zellij
pipe                   Send data to one or more plugins, launch them if they are not running
plugin                 Load a plugin [aliases: p]
run                    Run a command in a new pane [aliases: r]
setup                  Setup zellij and check its configuration
web                    Run a web server to serve terminal sessions
```